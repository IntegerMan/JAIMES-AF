@* 
    AgentVersionLink.razor - Reusable component for displaying version number with link to version details.
    When VersionId is null, displays a "Latest" chip indicating the game uses the latest active version.
    Displays as a chip with appropriate icon for consistent styling throughout the Admin UI.
*@

@if (VersionId.HasValue && !string.IsNullOrEmpty(VersionNumber))
{
    <MudTooltip Text="View Version Details" Placement="Placement.Top">
        <MudChip T="string"
                 Size="Size.Small"
                 Color="Color.Info"
                 Variant="Variant.Text"
                 Icon="@Icons.Material.Filled.Update"
                 Href="@($"/agents/{AgentId}/versions/{VersionId}")"
                 Label="true">
            @VersionNumber
        </MudChip>
    </MudTooltip>
}
else
{
    <MudTooltip Text="Always use the latest active version" Placement="Placement.Top">
        <MudChip T="string"
                 Size="Size.Small"
                 Color="Color.Primary"
                 Variant="Variant.Filled"
                 Icon="@Icons.Material.Filled.NewReleases"
                 Href="@($"/agents/{AgentId}")"
                 Label="true">
            Latest
        </MudChip>
    </MudTooltip>
}

@code {
    /// <summary>
    /// The agent's unique identifier.
    /// </summary>
    [Parameter, EditorRequired]
    public string AgentId { get; set; } = string.Empty;

    /// <summary>
    /// The instruction version ID. If null, displays "Latest" chip.
    /// </summary>
    [Parameter]
    public int? VersionId { get; set; }

    /// <summary>
    /// Display version number (e.g., "v1.0", "v2.3"). If null/empty and VersionId is null, displays "Latest".
    /// </summary>
    [Parameter]
    public string? VersionNumber { get; set; }
}
