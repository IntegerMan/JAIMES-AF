@page "/admin/sentiments"
@using MattEland.Jaimes.ServiceDefinitions.Responses
@using MattEland.Jaimes.Web.Components.Shared
@using MudBlazor
@inject NavigationManager NavigationManager
@inject ISnackbar Snackbar
@rendermode InteractiveServer

<PageTitle>Sentiment Analysis</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraLarge" Class="mt-4">
    <MudStack Row="true" AlignItems="AlignItems.Center" Class="mb-2">
        <MudBreadcrumbs Items="_breadcrumbs" Separator=">"></MudBreadcrumbs>
    </MudStack>
    <MudText Typo="Typo.h4" Class="mb-2">Sentiment Analysis</MudText>

    <AdminFilters GameId="@GameId"
                  ToolName="@ToolName"
                  AgentVersion="@AgentVersion"
                  Sentiment="@Sentiment"
                  HasFeedback="@HasFeedback"
                  OnClearFilters="ClearFilters"/>

    <SentimentGrid AgentId="@AgentId"
                   InstructionVersionId="@InstructionVersionId"
                   GameId="@GameId"
                   ToolName="@ToolName"
                   Sentiment="@Sentiment"
                   HasFeedback="@HasFeedback"/>
</MudContainer>

@code {
    [Parameter] [SupplyParameterFromQuery] public Guid? GameId { get; set; }

    [Parameter] [SupplyParameterFromQuery] public string? ToolName { get; set; }

    [Parameter] [SupplyParameterFromQuery] public string? AgentVersion { get; set; }

    [Parameter] [SupplyParameterFromQuery] public string? AgentId { get; set; }

    [Parameter] [SupplyParameterFromQuery] public int? InstructionVersionId { get; set; }

    [Parameter] [SupplyParameterFromQuery] public int? Sentiment { get; set; }

    [Parameter] [SupplyParameterFromQuery] public bool? HasFeedback { get; set; }

    private List<BreadcrumbItem> _breadcrumbs = new();

    protected override void OnInitialized()
    {
        _breadcrumbs = new List<BreadcrumbItem>
        {
            new BreadcrumbItem("Home", href: "/"),
            new BreadcrumbItem("Admin", href: "/admin"),
            new BreadcrumbItem("Sentiments", href: null, disabled: true)
        };
    }

    private void ClearFilters()
    {
        NavigationManager.NavigateTo("/admin/sentiments");
    }

}
