@page "/agents/new"
@rendermode InteractiveServer

<PageTitle>Create New Agent</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-4">
	<FormPageHeader Title="Create New Agent"
	                Icon="@Icons.Material.Filled.SmartToy"
	                Theme="FormPageHeader.HeroTheme.Secondary"
	                Subtitle="Define a new AI agent" />

	<MudPaper Class="pa-6" Elevation="2">
        <MudStack Row="true" AlignItems="AlignItems.Center" Class="mb-4">
            <MudBreadcrumbs Items="_breadcrumbs" Separator=">"></MudBreadcrumbs>
        </MudStack>

		@if (!string.IsNullOrEmpty(_errorMessage))
		{
			<MudAlert Severity="Severity.Error" Class="mb-4">@_errorMessage</MudAlert>
		}

		<MudForm>
			<MudTextField @bind-Value="_name"
			              Label="Name"
			              Variant="Variant.Outlined"
			              Class="mb-4"
			              Disabled="_isSaving"
			              Required="true"
			              RequiredError="Name is required"
			              HelperText="The name of the agent"/>

			<MudTextField @bind-Value="_role"
			              Label="Role"
			              Variant="Variant.Outlined"
			              Class="mb-4"
			              Disabled="_isSaving"
			              Required="true"
			              RequiredError="Role is required"
			              HelperText="The role or purpose of this agent (e.g., 'Game Master', 'Narrator', 'Character')"/>

			<MudTextField @bind-Value="_instructions"
			              Label="Instructions"
			              Variant="Variant.Outlined"
			              Class="mb-4"
			              Disabled="_isSaving"
			              Lines="8"
			              Required="true"
			              RequiredError="Instructions are required"
			              HelperText="Agent instructions that define how this agent behaves. This will be the initial instruction version."/>

			<FormActionButtons PrimaryText="Create Agent"
			                   PrimaryColor="Color.Secondary"
			                   PrimaryIcon="@Icons.Material.Filled.Add"
			                   OnPrimary="CreateAgentAsync"
			                   PrimaryDisabled="@(!IsFormValid())"
			                   IsSaving="_isSaving"
			                   SavingText="Creating..."
			                   CancelHref="/agents" />
		</MudForm>
	</MudPaper>
</MudContainer>
