@page "/rulesets/new"
@rendermode InteractiveServer

<PageTitle>Create New Ruleset</PageTitle>

<MudContainer MaxWidth="MaxWidth.Medium" Class="mt-4">
	<FormPageHeader Title="Create New Ruleset"
	                Icon="@Icons.Material.Filled.AutoStories"
	                Theme="FormPageHeader.HeroTheme.Accent"
	                Subtitle="Define a new set of rules" />

	<MudPaper Class="pa-6" Elevation="2">
        <MudStack Row="true" AlignItems="AlignItems.Center" Class="mb-4">
            <MudBreadcrumbs Items="_breadcrumbs" Separator=">"></MudBreadcrumbs>
        </MudStack>

		@if (!string.IsNullOrEmpty(_errorMessage))
		{
			<MudAlert Severity="Severity.Error" Class="mb-4">@_errorMessage</MudAlert>
		}

		<MudForm>
			<MudTextField @bind-Value="_rulesetId"
			              Label="Ruleset ID"
			              Variant="Variant.Outlined"
			              Class="mb-4"
			              Disabled="_isSaving"
			              Required="true"
			              RequiredError="Ruleset ID is required"
			              HelperText="A unique identifier for this ruleset (e.g., 'dnd5e', 'pathfinder')"/>

			<MudTextField @bind-Value="_name"
			              Label="Name"
			              Variant="Variant.Outlined"
			              Class="mb-4"
			              Disabled="_isSaving"
			              Required="true"
			              RequiredError="Name is required"
			              HelperText="The display name for this ruleset (e.g., 'D&D 5th Edition')"/>

			<div class="d-flex gap-2 mt-4">
				<MudButton Variant="Variant.Filled"
				           Color="Color.Success"
				           OnClick="CreateRulesetAsync"
				           Disabled="_isSaving || !IsFormValid()"
				           StartIcon="@Icons.Material.Filled.Add">
					@if (_isSaving)
					{
						<MudProgressCircular Class="ms-n1" Size="Size.Small" Indeterminate="true"/>
						<span class="ms-2">Creating...</span>
					}
					else
					{
						<span>Create Ruleset</span>
					}
				</MudButton>

				<MudButton Variant="Variant.Text"
				           Color="Color.Default"
				           Href="/rulesets"
				           Disabled="_isSaving">
					Cancel
				</MudButton>
			</div>
		</MudForm>
	</MudPaper>
</MudContainer>

