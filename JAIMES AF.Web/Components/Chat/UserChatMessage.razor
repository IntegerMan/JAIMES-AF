@using MudBlazor

<MudChat ChatPosition="ChatBubblePosition.End"
         Variant="Variant.Filled"
         Color="@(Highlighted ? Color.Info : Color)">
    @if (IsFirstParagraph)
    {
        <MudChatHeader Name="Player"/>
    }
    <MudChatBubble>
        @Text
    </MudChatBubble>
    
    <MudChatFooter Class="d-flex justify-content-end gap-2 mt-1">
        @if (Sentiment.HasValue)
        {
            <MudTooltip Text="@(Sentiment.Value > 0 ? "Positive Sentiment" : Sentiment.Value < 0 ? "Negative Sentiment" : "Neutral Sentiment")">
                <MudIcon Icon="@(Sentiment.Value > 0 ? Icons.Material.Filled.SentimentSatisfied : Sentiment.Value < 0 ? Icons.Material.Filled.SentimentDissatisfied : Icons.Material.Filled.SentimentNeutral)"
                         Color="@(Sentiment.Value > 0 ? Color.Success : Sentiment.Value < 0 ? Color.Error : Color.Warning)"
                         Size="Size.Small" />
            </MudTooltip>
        }
        else
        {
             <MudTooltip Text="Analyzing Sentiment...">
                <MudIcon Icon="@Icons.Material.Filled.HourglassEmpty" 
                         Color="Color.Default" 
                         Size="Size.Small" />
             </MudTooltip>
        }
    </MudChatFooter>
</MudChat>

@code {
    [Parameter]
    public required string Text { get; set; }

    [Parameter]
    public bool IsFirstParagraph { get; set; }

    [Parameter]
    public Color Color { get; set; } = Color.Primary;

    [Parameter]
    public bool Highlighted { get; set; }

    [Parameter]
    public int? Sentiment { get; set; }
}
